events{
}
http {
    upstream consulservers {
        least_conn;
        server csa:8500;
        server csb:8500;
        server csc:8500;
    }
    # upstream consulclients {
    #     least_conn;
    #     server cc1:8500;
    #     server cc2:8500;
    # }
    upstream gws {
        least_conn;
        server gw01:80;
        server gw02:80;
    }
    
    # server {
    #     listen 8510;
	# 	location /v1/ {
	# 		proxy_pass http://consulservers/v1/;
    #    }
    # }
    
    server {
        listen 8500;
		location / {
			proxy_pass http://consulservers;
       }
    }

    # server {
    #     listen 8520;
	# 	location / {
	# 		proxy_pass http://consulclients;
    #    }
    # }

    server {
        listen 5000;
		location / {
			proxy_pass http://gws;
       }
    }
}